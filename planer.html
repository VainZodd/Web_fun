<!DOCTYPE html>
<html lang="de" class="dark">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>LifeOS Node // Cyber Edition</title>
    
    <!-- Tailwind CSS (f√ºr Layout & Utilities) -->
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet" />

    <!-- Config & Custom Styles -->
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        bg: "#09090b",       /* Deepest Black */
                        surface: "#18181b",  /* Zinc 900 */
                        primary: "#8b5cf6",  /* Violet */
                        accent: "#06b6d4",   /* Cyan */
                        danger: "#ef4444",
                        success: "#10b981",
                    },
                    fontFamily: {
                        display: ["Space Grotesk", "sans-serif"],
                        body: ["Inter", "sans-serif"],
                    },
                    backgroundImage: {
                        'cyber-grid': "linear-gradient(rgba(139, 92, 246, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(139, 92, 246, 0.03) 1px, transparent 1px)",
                    }
                },
            },
        }
    </script>

    <style type="text/tailwindcss">
        @layer utilities {
            .glass {
                @apply bg-surface/60 backdrop-blur-md border border-white/5;
            }
            .glass-panel {
                @apply bg-surface/40 backdrop-blur-xl border border-white/10 shadow-xl rounded-xl;
            }
            .neon-text {
                text-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
            }
            .nav-item.active {
                @apply bg-primary/20 text-primary border-r-2 border-primary;
            }
            /* Custom Scrollbar */
            ::-webkit-scrollbar { width: 6px; height: 6px; }
            ::-webkit-scrollbar-track { background: transparent; }
            ::-webkit-scrollbar-thumb { background: #3f3f46; border-radius: 3px; }
            ::-webkit-scrollbar-thumb:hover { background: #71717a; }
            
            /* Animations */
            .fade-in { animation: fadeIn 0.3s ease-out; }
            @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        }
        
        body { 
            background-color: #09090b; 
            background-size: 30px 30px;
        }
    </style>
</head>

<body class="font-body text-zinc-300 min-h-screen overflow-hidden bg-cyber-grid selection:bg-primary selection:text-white flex flex-col md:flex-row">

    <!-- === SIDEBAR === -->
    <aside class="w-full md:w-64 glass flex-shrink-0 flex md:flex-col justify-between z-50 md:h-screen fixed md:relative bottom-0 border-t md:border-t-0 md:border-r border-white/10">
        <!-- Logo Area -->
        <div class="hidden md:flex items-center gap-3 p-6">
            <div class="w-8 h-8 rounded bg-gradient-to-tr from-primary to-accent flex items-center justify-center shadow-[0_0_15px_rgba(139,92,246,0.4)]">
                <span class="material-symbols-rounded text-white text-lg">grid_view</span>
            </div>
            <h1 class="font-display font-bold text-xl tracking-wider text-white neon-text">LIFE<span class="text-primary">OS</span></h1>
        </div>

        <!-- Navigation -->
        <nav class="flex md:flex-col w-full md:w-auto justify-around md:justify-start md:px-4 gap-1 md:gap-2 p-2 md:p-0">
            <button onclick="app.router('dms')" class="nav-item group flex flex-col md:flex-row items-center md:gap-3 p-2 md:px-4 md:py-3 rounded-lg hover:bg-white/5 transition-all w-full text-left" id="nav-dms">
                <span class="material-symbols-rounded group-hover:text-primary transition-colors">folder_open</span>
                <span class="text-[10px] md:text-sm font-medium">Dateien</span>
            </button>
            <button onclick="app.router('inventory')" class="nav-item group flex flex-col md:flex-row items-center md:gap-3 p-2 md:px-4 md:py-3 rounded-lg hover:bg-white/5 transition-all w-full text-left" id="nav-inventory">
                <span class="material-symbols-rounded group-hover:text-accent transition-colors">inventory_2</span>
                <span class="text-[10px] md:text-sm font-medium">Inventar</span>
            </button>
            <button onclick="app.router('planner')" class="nav-item group flex flex-col md:flex-row items-center md:gap-3 p-2 md:px-4 md:py-3 rounded-lg hover:bg-white/5 transition-all w-full text-left" id="nav-planner">
                <span class="material-symbols-rounded group-hover:text-success transition-colors">calendar_month</span>
                <span class="text-[10px] md:text-sm font-medium">Planer</span>
            </button>
        </nav>

        <!-- User Profile (Desktop only visual) -->
        <div class="hidden md:flex p-4 border-t border-white/10 items-center gap-3 mt-auto">
            <div class="w-8 h-8 rounded-full bg-zinc-700 overflow-hidden">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" alt="User">
            </div>
            <div>
                <p class="text-xs font-bold text-white">Admin User</p>
                <p class="text-[10px] text-zinc-500">System Online</p>
            </div>
        </div>
    </aside>

    <!-- === MAIN CONTENT WRAPPER === -->
    <div class="flex-1 flex flex-col h-screen overflow-hidden relative">
        
        <!-- HEADER -->
        <header class="h-16 border-b border-white/10 glass flex items-center justify-between px-6 shrink-0 z-40">
            <h2 id="page-title" class="font-display font-bold text-lg text-white tracking-wide">Dashboard</h2>
            
            <div class="flex items-center gap-4">
                <!-- Search Bar -->
                <div class="relative group hidden sm:block">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <span class="material-symbols-rounded text-zinc-500 text-sm">search</span>
                    </div>
                    <input type="text" id="global-search" oninput="app.handleSearch(this.value)" 
                           class="bg-black/20 border border-white/10 text-zinc-300 text-sm rounded-full focus:ring-primary focus:border-primary block w-64 pl-10 p-2 transition-all focus:w-80" 
                           placeholder="Suchen...">
                </div>
                <!-- Add Button -->
                <button onclick="app.ui.openCurrentModal()" class="bg-primary hover:bg-primary/90 text-white rounded-full w-10 h-10 flex items-center justify-center shadow-[0_0_15px_rgba(139,92,246,0.5)] transition-transform hover:scale-105">
                    <span class="material-symbols-rounded">add</span>
                </button>
            </div>
        </header>

        <!-- SCROLLABLE CONTENT AREA -->
        <main class="flex-1 overflow-y-auto p-4 md:p-8 pb-24 md:pb-8 relative">
            
            <!-- MODULE 1: DMS (Documents) -->
            <section id="view-dms" class="fade-in hidden">
                <div class="flex items-center gap-2 mb-6 text-sm text-zinc-400">
                    <button onclick="app.dms.goRoot()" class="hover:text-white flex items-center gap-1"><span class="material-symbols-rounded text-lg">home</span> Root</button>
                    <span id="dms-breadcrumb-trail"></span>
                </div>

                <div id="dms-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
                    <!-- JS Injected Content -->
                </div>
                
                <div id="dms-empty" class="hidden flex flex-col items-center justify-center mt-20 text-zinc-600">
                    <span class="material-symbols-rounded text-6xl mb-4 opacity-20">folder_off</span>
                    <p>Dieser Ordner ist leer.</p>
                </div>
            </section>

            <!-- MODULE 2: INVENTORY -->
            <section id="view-inventory" class="fade-in hidden">
                <div class="glass-panel overflow-hidden">
                    <table class="w-full text-left text-sm text-zinc-400">
                        <thead class="bg-white/5 text-zinc-200 uppercase text-xs font-display tracking-wider">
                            <tr>
                                <th class="px-6 py-4">Item</th>
                                <th class="px-6 py-4">Kategorie</th>
                                <th class="px-6 py-4 text-center">Menge</th>
                                <th class="px-6 py-4">Status</th>
                                <th class="px-6 py-4 text-right">Aktion</th>
                            </tr>
                        </thead>
                        <tbody id="inventory-list" class="divide-y divide-white/5">
                            <!-- JS Injected Content -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- MODULE 3: PLANNER -->
            <section id="view-planner" class="fade-in hidden">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Stats/Today -->
                    <div class="lg:col-span-1 space-y-4">
                        <div class="glass-panel p-6 bg-gradient-to-br from-primary/10 to-transparent">
                            <h3 class="text-white font-display font-bold text-xl mb-1">Deine √úbersicht</h3>
                            <p class="text-zinc-400 text-sm mb-4" id="planner-date">Heute</p>
                            <div class="flex items-end gap-2">
                                <span class="text-4xl font-bold text-white" id="planner-count">0</span>
                                <span class="text-zinc-500 mb-1">offene Aufgaben</span>
                            </div>
                        </div>
                    </div>

                    <!-- Task List -->
                    <div class="lg:col-span-2">
                        <ul id="planner-list" class="space-y-3">
                            <!-- JS Injected Content -->
                        </ul>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- === MODALS (Overlays) === -->
    <div id="modal-overlay" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] hidden items-center justify-center p-4">
        
        <!-- Generic Modal Container -->
        <div class="glass-panel w-full max-w-md p-6 relative transform transition-all scale-100">
            <button onclick="app.ui.closeModals()" class="absolute top-4 right-4 text-zinc-500 hover:text-white">
                <span class="material-symbols-rounded">close</span>
            </button>
            <h3 id="modal-title" class="text-xl font-bold text-white mb-4 font-display">Neuer Eintrag</h3>
            
            <!-- DMS Form -->
            <div id="form-dms" class="hidden space-y-4">
                <select id="dms-type" class="w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-primary focus:ring-1 focus:ring-primary">
                    <option value="folder">üìÅ Ordner erstellen</option>
                    <option value="file">üìÑ Notiz erstellen</option>
                </select>
                <input type="text" id="dms-name" placeholder="Name" class="w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white placeholder-zinc-600 focus:border-primary focus:ring-1 focus:ring-primary">
                <textarea id="dms-content" rows="4" placeholder="Inhalt (nur f√ºr Notizen)..." class="w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white placeholder-zinc-600 focus:border-primary focus:ring-1 focus:ring-primary hidden"></textarea>
                <button onclick="app.dms.add()" class="w-full bg-primary hover:bg-primary/90 text-white font-bold py-2.5 rounded-lg transition-colors">Erstellen</button>
            </div>

            <!-- Inventory Form -->
            <div id="form-inventory" class="hidden space-y-4">
                <input type="text" id="inv-name" placeholder="Item Name (z.B. HDMI Kabel)" class="w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-accent focus:ring-accent">
                <div class="grid grid-cols-2 gap-4">
                    <input type="text" id="inv-cat" placeholder="Kategorie" class="bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-accent">
                    <input type="number" id="inv-qty" placeholder="Menge" value="1" class="bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-accent">
                </div>
                <button onclick="app.inventory.add()" class="w-full bg-accent hover:bg-accent/90 text-black font-bold py-2.5 rounded-lg transition-colors">Hinzuf√ºgen</button>
            </div>

            <!-- Planner Form -->
            <div id="form-planner" class="hidden space-y-4">
                <input type="text" id="plan-title" placeholder="Was ist zu erledigen?" class="w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-success focus:ring-success">
                <input type="date" id="plan-date" class="w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-success [color-scheme:dark]">
                <button onclick="app.planner.add()" class="w-full bg-success hover:bg-success/90 text-black font-bold py-2.5 rounded-lg transition-colors">Planen</button>
            </div>

        </div>
    </div>

    <!-- === LOGIC === -->
    <script>
        const app = {
            data: {
                view: 'dms',
                currentFolderId: null,
                search: '',
                dms: [],
                inventory: [],
                planner: []
            },

            init() {
                // 1. Load Data
                const saved = localStorage.getItem('lifeos_cyber_db');
                if (saved) {
                    this.data = { ...this.data, ...JSON.parse(saved) };
                    // Reset transient state
                    this.data.currentFolderId = null;
                    this.data.search = '';
                } else {
                    // Seed Dummy Data
                    this.data.dms = [
                        { id: 'f1', type: 'folder', name: 'Projects', parentId: null },
                        { id: 'f2', type: 'folder', name: 'Archive', parentId: null },
                        { id: 'd1', type: 'file', name: 'Welcome Note', content: 'Welcome to your new system.', parentId: 'f1' }
                    ];
                    this.data.inventory = [
                        { id: 'i1', name: 'MacBook Pro', category: 'Tech', qty: 1 },
                        { id: 'i2', name: 'Kaffee', category: 'Kitchen', qty: 50 }
                    ];
                    this.data.planner = [
                        { id: 'p1', title: 'System Setup', date: new Date().toISOString().split('T')[0], done: false }
                    ];
                }

                // 2. Setup Date
                document.getElementById('planner-date').textContent = new Date().toLocaleDateString('de-DE', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });

                // 3. Setup Listeners
                document.getElementById('dms-type').addEventListener('change', (e) => {
                    const contentArea = document.getElementById('dms-content');
                    if (e.target.value === 'file') contentArea.classList.remove('hidden');
                    else contentArea.classList.add('hidden');
                });

                // 4. Initial Render
                this.router('dms');
            },

            save() {
                localStorage.setItem('lifeos_cyber_db', JSON.stringify(this.data));
                this.renderCurrentView();
            },

            router(viewName) {
                this.data.view = viewName;
                this.data.search = ''; // reset search
                document.getElementById('global-search').value = '';

                // UI Toggles
                document.querySelectorAll('section').forEach(el => el.classList.add('hidden'));
                document.getElementById(`view-${viewName}`).classList.remove('hidden');

                // Nav States
                document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
                document.getElementById(`nav-${viewName}`).classList.add('active');

                // Header Title
                const titles = { dms: 'Dateimanager', inventory: 'Lagerbestand', planner: 'Aufgaben & Termine' };
                document.getElementById('page-title').innerText = titles[viewName];

                this.renderCurrentView();
            },

            handleSearch(query) {
                this.data.search = query.toLowerCase();
                this.renderCurrentView();
            },

            renderCurrentView() {
                if (this.data.view === 'dms') this.dms.render();
                if (this.data.view === 'inventory') this.inventory.render();
                if (this.data.view === 'planner') this.planner.render();
            },

            // --- MODULE: DMS ---
            dms: {
                render() {
                    const grid = document.getElementById('dms-grid');
                    grid.innerHTML = '';
                    const breadcrumb = document.getElementById('dms-breadcrumb-trail');
                    
                    // Filter Logic
                    let items = [];
                    if (app.data.search) {
                        items = app.data.dms.filter(i => i.name.toLowerCase().includes(app.data.search));
                        breadcrumb.innerHTML = `<span class="text-primary">Suche: "${app.data.search}"</span>`;
                    } else {
                        items = app.data.dms.filter(i => i.parentId === app.data.currentFolderId);
                        // Breadcrumb Logic
                        if(app.data.currentFolderId) {
                            const curr = app.data.dms.find(i => i.id === app.data.currentFolderId);
                            breadcrumb.innerHTML = ` / <span class="text-white font-bold">${curr.name}</span>`;
                        } else {
                            breadcrumb.innerHTML = '';
                        }
                    }

                    if (items.length === 0) {
                        document.getElementById('dms-empty').classList.remove('hidden');
                    } else {
                        document.getElementById('dms-empty').classList.add('hidden');
                        items.forEach(item => {
                            const el = document.createElement('div');
                            // Styling based on Type
                            const isFolder = item.type === 'folder';
                            el.className = `glass-panel p-4 flex flex-col items-center justify-center gap-3 cursor-pointer hover:bg-white/10 transition-colors group relative border-l-4 ${isFolder ? 'border-primary' : 'border-zinc-500'}`;
                            
                            el.onclick = () => {
                                if (isFolder) app.dms.openFolder(item.id);
                                else alert(item.content || 'Leere Notiz');
                            };

                            el.innerHTML = `
                                <span class="material-symbols-rounded text-4xl ${isFolder ? 'text-primary' : 'text-zinc-400'} group-hover:scale-110 transition-transform">${isFolder ? 'folder' : 'description'}</span>
                                <span class="text-sm font-medium text-center truncate w-full">${item.name}</span>
                                <button onclick="event.stopPropagation(); app.dms.delete('${item.id}')" class="absolute top-2 right-2 text-zinc-600 hover:text-danger opacity-0 group-hover:opacity-100 transition-opacity">
                                    <span class="material-symbols-rounded text-sm">delete</span>
                                </button>
                            `;
                            grid.appendChild(el);
                        });
                    }
                },
                openFolder(id) {
                    app.data.currentFolderId = id;
                    app.data.search = '';
                    document.getElementById('global-search').value = '';
                    app.renderCurrentView();
                },
                goRoot() {
                    app.data.currentFolderId = null;
                    app.renderCurrentView();
                },
                add() {
                    const type = document.getElementById('dms-type').value;
                    const name = document.getElementById('dms-name').value;
                    const content = document.getElementById('dms-content').value;
                    if(!name) return;

                    app.data.dms.push({
                        id: Date.now().toString(),
                        type, name, content,
                        parentId: app.data.currentFolderId
                    });
                    app.ui.closeModals();
                    app.save();
                },
                delete(id) {
                    if(confirm('Wirklich l√∂schen?')) {
                        // Cascade delete (simple implementation)
                        app.data.dms = app.data.dms.filter(i => i.id !== id && i.parentId !== id);
                        app.save();
                    }
                }
            },

            // --- MODULE: INVENTORY ---
            inventory: {
                render() {
                    const tbody = document.getElementById('inventory-list');
                    tbody.innerHTML = '';
                    
                    const items = app.data.inventory.filter(i => 
                        i.name.toLowerCase().includes(app.data.search) || 
                        i.category.toLowerCase().includes(app.data.search)
                    );

                    items.forEach(item => {
                        const tr = document.createElement('tr');
                        tr.className = "hover:bg-white/5 transition-colors group";
                        const lowStock = item.qty < 3;
                        
                        tr.innerHTML = `
                            <td class="px-6 py-4 font-medium text-white">${item.name}</td>
                            <td class="px-6 py-4"><span class="bg-white/10 px-2 py-1 rounded text-xs">${item.category}</span></td>
                            <td class="px-6 py-4">
                                <div class="flex items-center justify-center gap-2">
                                    <button onclick="app.inventory.update('${item.id}', -1)" class="w-6 h-6 rounded bg-white/10 hover:bg-white/20 flex items-center justify-center">-</button>
                                    <span class="w-8 text-center">${item.qty}</span>
                                    <button onclick="app.inventory.update('${item.id}', 1)" class="w-6 h-6 rounded bg-white/10 hover:bg-white/20 flex items-center justify-center">+</button>
                                </div>
                            </td>
                            <td class="px-6 py-4">
                                <span class="px-2 py-1 rounded-full text-xs font-bold ${lowStock ? 'bg-red-500/20 text-red-400' : 'bg-green-500/20 text-green-400'}">
                                    ${lowStock ? 'Niedrig' : 'Gut'}
                                </span>
                            </td>
                            <td class="px-6 py-4 text-right">
                                <button onclick="app.inventory.delete('${item.id}')" class="text-zinc-500 hover:text-danger">
                                    <span class="material-symbols-rounded">delete</span>
                                </button>
                            </td>
                        `;
                        tbody.appendChild(tr);
                    });
                },
                add() {
                    const name = document.getElementById('inv-name').value;
                    const cat = document.getElementById('inv-cat').value;
                    const qty = parseInt(document.getElementById('inv-qty').value) || 0;
                    if(!name) return;

                    app.data.inventory.push({ id: Date.now().toString(), name, category: cat, qty });
                    app.ui.closeModals();
                    app.save();
                },
                update(id, change) {
                    const item = app.data.inventory.find(i => i.id === id);
                    if(item) {
                        item.qty = Math.max(0, item.qty + change);
                        app.save();
                    }
                },
                delete(id) {
                    if(confirm('L√∂schen?')) {
                        app.data.inventory = app.data.inventory.filter(i => i.id !== id);
                        app.save();
                    }
                }
            },

            // --- MODULE: PLANNER ---
            planner: {
                render() {
                    const list = document.getElementById('planner-list');
                    list.innerHTML = '';
                    
                    // Stats
                    const openTasks = app.data.planner.filter(t => !t.done).length;
                    document.getElementById('planner-count').innerText = openTasks;

                    // Sort & Filter
                    let tasks = app.data.planner.sort((a,b) => (a.done === b.done) ? 0 : a.done ? 1 : -1);
                    if(app.data.search) tasks = tasks.filter(t => t.title.toLowerCase().includes(app.data.search));

                    tasks.forEach(task => {
                        const li = document.createElement('li');
                        li.className = `glass-panel p-4 flex items-center gap-4 group transition-all ${task.done ? 'opacity-50' : ''}`;
                        li.innerHTML = `
                            <button onclick="app.planner.toggle('${task.id}')" class="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${task.done ? 'bg-success border-success' : 'border-zinc-500 hover:border-success'}">
                                ${task.done ? '<span class="material-symbols-rounded text-black text-sm font-bold">check</span>' : ''}
                            </button>
                            <div class="flex-1">
                                <h4 class="font-medium text-white ${task.done ? 'line-through decoration-zinc-500' : ''}">${task.title}</h4>
                                <p class="text-xs text-zinc-500 flex items-center gap-1 mt-1">
                                    <span class="material-symbols-rounded text-[10px]">event</span> ${new Date(task.date).toLocaleDateString()}
                                </p>
                            </div>
                            <button onclick="app.planner.delete('${task.id}')" class="text-zinc-600 hover:text-danger opacity-0 group-hover:opacity-100 transition-opacity">
                                <span class="material-symbols-rounded">delete</span>
                            </button>
                        `;
                        list.appendChild(li);
                    });
                },
                add() {
                    const title = document.getElementById('plan-title').value;
                    const date = document.getElementById('plan-date').value;
                    if(!title || !date) return;

                    app.data.planner.push({ id: Date.now().toString(), title, date, done: false });
                    app.ui.closeModals();
                    app.save();
                },
                toggle(id) {
                    const t = app.data.planner.find(i => i.id === id);
                    if(t) { t.done = !t.done; app.save(); }
                },
                delete(id) {
                    app.data.planner = app.data.planner.filter(i => i.id !== id);
                    app.save();
                }
            },

            // --- UI HELPERS ---
            ui: {
                openCurrentModal() {
                    const view = app.data.view;
                    document.getElementById('modal-overlay').classList.remove('hidden');
                    document.getElementById('modal-overlay').classList.add('flex');
                    
                    // Hide all forms, show current
                    ['dms', 'inventory', 'planner'].forEach(v => document.getElementById(`form-${v}`).classList.add('hidden'));
                    document.getElementById(`form-${view}`).classList.remove('hidden');
                    
                    // Set Title
                    const titles = { dms: 'Neues Element', inventory: 'Item hinzuf√ºgen', planner: 'Termin erstellen' };
                    document.getElementById('modal-title').innerText = titles[view];
                },
                closeModals() {
                    document.getElementById('modal-overlay').classList.add('hidden');
                    document.getElementById('modal-overlay').classList.remove('flex');
                    // Clear inputs
                    document.querySelectorAll('input, textarea').forEach(i => {
                        if(i.id !== 'global-search') i.value = '';
                    });
                }
            }
        };

        // Close modal on outside click
        document.getElementById('modal-overlay').addEventListener('click', (e) => {
            if (e.target.id === 'modal-overlay') app.ui.closeModals();
        });

        // Initialize App
        document.addEventListener('DOMContentLoaded', () => app.init());

    </script>
</body>
</html>
